FROM mksbikerider/docker-intellij

MAINTAINER Michael Sutherland "mike@msutherland.name"
# Based on work by MAINTAINER Florin Patan "florinpatan@gmail.com"

ARG download_url=http://download.oracle.com/otn-pub/java/jdk/8u5-b13/jdk-8u5-linux-x64.tar.gz
ARG download_folder=/tmp
ARG java_name=${download_folder}/jdk1.8.0_101"
ARG java_archive="/tmp/jdk-8u5-linux-x64.tar.gz"

RUN echo 'Installing JDK from ${java_archive}'
# remove -q for logging
RUN wget  -O ${java_archive} --no-cookies --no-check-certificate --header "Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com%2F; oraclelicense=accept-securebackup-cookie" "http://download.oracle.com/otn-pub/java/jdk/8u101-b13/jdk-8u101-linux-i586.tar.gz"
RUN  tar -zxf ${java_archive} -C /tmp
RUN  chown root:root ${java_name}
RUN  update-alternatives --install /usr/bin/java java ${java_name}/bin/java 0
RUN  rm ${java_archive}

ADD ./run /usr/local/bin/intellij

RUN chmod +rx /usr/local/bin/intellij && \
    chown developer:developer -R /home/developer/.IdeaIC2016.2